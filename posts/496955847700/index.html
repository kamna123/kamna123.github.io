<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Learn Docker through Hands-on Examples" /><meta name="author" content="Kamna Garg" /><meta property="og:locale" content="en" /><meta name="description" content="Docker is a software platform that allows you to build, test, and deploy applications quickly. Docker packages software into standardized…" /><meta property="og:description" content="Docker is a software platform that allows you to build, test, and deploy applications quickly. Docker packages software into standardized…" /><link rel="canonical" href="/posts/496955847700/" /><meta property="og:url" content="/posts/496955847700/" /><meta property="og:site_name" content="Kamna" /><meta property="og:image" content="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-11T20:56:44+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" /><meta property="twitter:title" content="Learn Docker through Hands-on Examples" /><meta name="twitter:site" content="@kamna90" /><meta name="twitter:creator" content="@Kamna Garg" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kamna Garg"},"dateModified":"2023-07-11T20:56:44+00:00","datePublished":"2023-07-11T20:56:44+00:00","description":"Docker is a software platform that allows you to build, test, and deploy applications quickly. Docker packages software into standardized…","headline":"Learn Docker through Hands-on Examples","image":"/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/496955847700/"},"url":"/posts/496955847700/"}</script><title>Learn Docker through Hands-on Examples | Kamna</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kamna"><meta name="application-name" content="Kamna"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/1621252237275.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Kamna</a></div><div class="site-subtitle font-italic">Womanwhocode</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="javascript:location.href = 'mailto:' + ['kamna90123','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Learn Docker through Hands-on Examples</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Learn Docker through Hands-on Examples</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1689109004" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 11, 2023 </em> </span> <span> Updated <em class="" data-ts="1689109004" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 11, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1910 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h3 id="learn-docker-through-hands-on-examples"><span class="mr-2">Learn Docker through Hands-on Examples</span><a href="#learn-docker-through-hands-on-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" class="popup img-link "><img data-src="/assets/496955847700/1*novwF2Asuw8WBUxd1qsItg.png" alt="Image Source: Google" class="lazyload" data-proofer-ignore></a></p><p>Image Source: Google</p><blockquote><p>Docker is a software platform that allows you to build, test, and deploy applications quickly. Docker packages software into standardized units called <a href="https://aws.amazon.com/containers/" target="_blank">containers</a> that have everything the software needs to run including libraries, system tools, code, and runtime.</p></blockquote><h4 id="containers"><span class="mr-2">Containers</span><a href="#containers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>Now the next question is what is a container and what problems does it solve?</strong></p><ol><li>A container is a method to package applications with all the required dependencies and configurations.<li>It is a portable artifact that can be easily shared and moved between different environments.<li>Containers enhance development and deployment efficiency.</ol><p><strong>Where do containers live?</strong></p><p>As we know Containers, being portable, can be easily shared and moved around.</p><ol><li>They can be stored in container repositories, such as Docker Hub, Amazon ECR, and Google Container Registry.<li>Private repositories cater to company-specific needs, ensuring controlled access and security.<li>Public repositories like <a href="https://hub.docker.com/" target="_blank">Docker Hub</a> offer a wide range of pre-built application containers, enabling easy discovery and utilization.</ol><p>Now, let’s see how containers improved the deployment process:</p><p><strong>Before the introduction of containers:</strong></p><ul><li>Applications were individually installed on local systems, leading to <strong><em>inconsistencies</em></strong> and potential conflicts.<li><strong><em>Dependency management</em></strong> was challenging, with compatibility issues and conflicts between different versions of libraries.<li>Portability was limited, requiring <strong><em>manual adjustments</em></strong> when moving applications across different environments, leading to the “works on my machine” problem.</ul><p><strong>After the introduction of containers:</strong></p><ul><li>Dependency installation is no longer required on the host system as containers have their own isolated OS layer and include all necessary dependencies and configurations.<li>The same command can be used to fetch and install the application within the container, regardless of the underlying operating system.<li>This eliminates the need for manual configuration and ensures consistent behavior across different environments, making development and deployment more streamlined and efficient.</ul><h4 id="application-deployment"><span class="mr-2">Application Deployment</span><a href="#application-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Now let’s see how containers ease the deployment process</p><p><strong>Deployment Process Before the Introduction of Containers:</strong></p><ul><li>Manual artifact creation and deployment instructions.<li>Manual setup of the deployment environment, including infrastructure components.<li>Potential dependency version conflicts on the operating system.<li>Reliance on textual instructions leads to manual errors or misunderstandings.<li>Time-consuming and error-prone environment configuration.<li>Lack of standardized deployment units, resulting in inconsistencies and compatibility issues.</ul><p><strong>Deployment Process After the Introduction of Containers:</strong></p><ul><li>Containerized artifacts ensure application portability and consistency.<li>Infrastructure as code enables automated provisioning and configuration of deployment environments.<li>Automated deployment with orchestration tools like Kubernetes improves scalability and reliability.<li>Integration with CI/CD pipelines allows for seamless and efficient application testing, building, and deployment.</ul><blockquote><p>So technically, Container is layer of stacked images on top of each other.</p></blockquote><p><a href="/assets/496955847700/1*oTEfsEwwyKGlM92J-rE0Zg.png" class="popup img-link "><img data-src="/assets/496955847700/1*oTEfsEwwyKGlM92J-rE0Zg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p><strong>Let’s delve into practical examples.</strong></p><p>Let’s say, I want to install Postgres, I will install it using the docker image.</p><p>As you can see from the below image, it is unable it find it locally and will pull it from the docker hub. The output shows different layers of images, represented by hashes, being downloaded. These layers can include the underlying Linux image as well as the application-specific layers.</p><p>The advantage of using different layers of images is :</p><ul><li><strong>Incremental Updates</strong> : Only updated layers are downloaded, saving time and bandwidth when installing different Postgres versions.<li><strong>Efficient Storage Utilization</strong> : Common base layers are shared among images, minimizing redundancy and optimizing storage usage.<li><strong>Faster Deployment and Versioning</strong> : Docker identifies unchanged layers for quicker deployment and supports versioning with preserved layers.</ul><p><a href="/assets/496955847700/1*h_Vb0t4PYvOaMi9lR7G9nA.png" class="popup img-link "><img data-src="/assets/496955847700/1*h_Vb0t4PYvOaMi9lR7G9nA.png" alt="Downloading Postgres image" class="lazyload" data-proofer-ignore></a></p><p>Downloading Postgres image</p><p>See the output of the below <strong>docker ps</strong> command:</p><p><a href="/assets/496955847700/1*P4k9gO_hZEnxX0T4s80WIQ.png" class="popup img-link "><img data-src="/assets/496955847700/1*P4k9gO_hZEnxX0T4s80WIQ.png" alt="port" class="lazyload" data-proofer-ignore></a></p><p>port</p><p>There are two terms here, container and image.</p><ul><li><strong>Image</strong> : An image is a standalone, read-only template that contains the application code, dependencies, and configurations. It serves as the basis for creating containers.<li><strong>Container</strong> : A container is a running instance of an image. It is an isolated and executable environment that includes the necessary runtime components and allows the application to run and interact with the surrounding system.</ul><blockquote><p>In summary, an image is a static template, while a container is a dynamic and running instance created from an image.</p></blockquote><h4 id="docker-vs-virtual-machine"><span class="mr-2">Docker vs Virtual Machine</span><a href="#docker-vs-virtual-machine" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>OS has 2 layers, What part of OS both virtualize?</p><p><strong>Docker</strong> :</p><ul><li>Virtualizes the application layer of the operating system (OS) .<li>When a Docker image is downloaded, it includes the application layer of the OS and other applications installed on top of it.<li>Utilizes the host system’s kernel, rather than running its own separate kernel.</ul><p><strong>Virtual Machines (VMs):</strong></p><ul><li>Virtualizes both the application layer and the kernel of the OS.<li>Creates a complete virtualized instance of an OS, running its own separate kernel.<li>Does not rely on the host system’s kernel and operates as an independent virtualized environment.</ul><blockquote><p>Benefits of Docker over VMs is that Docker containers offer faster startup times and efficient memory utilization compared to traditional virtual machines.</p></blockquote><p><a href="/assets/496955847700/1*qUKOx4eKvnsfGiGQtRlctQ.png" class="popup img-link "><img data-src="/assets/496955847700/1*qUKOx4eKvnsfGiGQtRlctQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><h4 id="basic-docker-commands"><span class="mr-2">Basic Docker Commands:</span><a href="#basic-docker-commands" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><code class="language-plaintext highlighter-rouge">docker ps</code> : Lists all running containers.<li><code class="language-plaintext highlighter-rouge">docker run [image]</code> : Creates and starts a new container based on the specified image.<li><code class="language-plaintext highlighter-rouge">docker stop [container]</code> : Stops a running container.<li><code class="language-plaintext highlighter-rouge">docker start [container]</code> : Starts specified container.<li><code class="language-plaintext highlighter-rouge">docker ps -a:</code> lists all containers, including both running and stopped containers</ol><h4 id="port-binding"><span class="mr-2">Port Binding</span><a href="#port-binding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Let’s say I need two different versions of Postgres for different applications and I started two containers of Postgres as shown below:</p><p><a href="/assets/496955847700/1*xgTw2w_oykwfjwynU0ZzRA.png" class="popup img-link "><img data-src="/assets/496955847700/1*xgTw2w_oykwfjwynU0ZzRA.png" alt="two containers bound to the same port" class="lazyload" data-proofer-ignore></a></p><p>two containers bound to the same port</p><p>In the scenario where you require two different versions of Postgres for different applications and have started two Postgres containers, both running on the same port, the challenge arises as to how the two different applications will communicate with their respective Postgres containers. This is where port binding becomes important.</p><p>Let’s see how it works.</p><p>There are container ports and host ports. When running multiple containers on your host machine, each container can expose its own set of ports. To establish communication between the containers and the host machine, a binding or mapping needs to be created between the port on the host machine and the port exposed by the container. This allows the applications running inside the containers to interact with the specified ports on the host machine.</p><p>You can create those bindings as shown below:</p><p><a href="/assets/496955847700/1*-66Kz85DyYklKdEpPEBRkw.png" class="popup img-link "><img data-src="/assets/496955847700/1*-66Kz85DyYklKdEpPEBRkw.png" alt="port binding" class="lazyload" data-proofer-ignore></a></p><p>port binding</p><p>Now two different versions of Postgres are associated with the 6001 and 6000 ports of the host machine.</p><h4 id="docker-logs"><span class="mr-2"><strong>Docker Logs</strong></span><a href="#docker-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <code class="language-plaintext highlighter-rouge">docker logs</code> command is helpful for troubleshooting, debugging, and monitoring containerized applications, providing insights into their runtime behavior and any issues that may have occurred.</p><p>Syntax: <code class="language-plaintext highlighter-rouge">docker logs [container]</code></p><h4 id="docker-exec"><span class="mr-2">Docker Exec</span><a href="#docker-exec" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <code class="language-plaintext highlighter-rouge">docker exec</code> command allows you to run a command within a running container and get access to its terminal.</p><p>It is useful for running commands or interacting with a running container, allowing you to execute commands as if you were directly accessing the container’s terminal.</p><p><a href="/assets/496955847700/1*epzO5voSPZbsPWqnH6vZYQ.png" class="popup img-link "><img data-src="/assets/496955847700/1*epzO5voSPZbsPWqnH6vZYQ.png" alt="Docker exec command" class="lazyload" data-proofer-ignore></a></p><p>Docker exec command</p><h4 id="practical-example"><span class="mr-2"><strong>Practical Example</strong></span><a href="#practical-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>We will be coding a Go application using MongoDB for a Docker demonstration. It will expose APIs to insert/fetch data from MongoDB.</p><p><a href="/assets/496955847700/1*1LbMaF3LX3WTOVUd1pF-pg.png" class="popup img-link "><img data-src="/assets/496955847700/1*1LbMaF3LX3WTOVUd1pF-pg.png" alt="Golang Application" class="lazyload" data-proofer-ignore></a></p><p>Golang Application</p><p>We need to run the MongoDB container for the application to access and also to connect it to mongo express. We need both of them to be able to communicate with each other. In order to facilitate communication between the MongoDB container and the Mongo Express container, it’s essential to understand the concept of <strong><em>Docker Networking.</em></strong></p><p>Docker creates its own isolated network for containers to run in. Containers within the same network (mongodb and mongoexpress in our case), can communicate with each other using their container names without relying on host-specific details like IP addresses or ports.</p><p>The Go application, running outside the Docker network, can connect to the MongoDB and Mongo Express containers using their respective hostnames and ports. It communicates with them as if they were external services accessible through the network.</p><p><a href="/assets/496955847700/1*FjQD2eYzCuDlZEKyKXLLxg.png" class="popup img-link "><img data-src="/assets/496955847700/1*FjQD2eYzCuDlZEKyKXLLxg.png" alt="Docker Network" class="lazyload" data-proofer-ignore></a></p><p>Docker Network</p><p>Below are the commands to create a docker network and bind MongoDB and mongo-express to it</p><p><a href="/assets/496955847700/1*4mXAVGFwoVr1rv8Ybkbtfw.png" class="popup img-link "><img data-src="/assets/496955847700/1*4mXAVGFwoVr1rv8Ybkbtfw.png" alt="docker network and bind Mongo to it" class="lazyload" data-proofer-ignore></a></p><p>docker network and bind Mongo to it</p><p><a href="/assets/496955847700/1*nCRCtKP40IMAOBbR__F_vg.png" class="popup img-link "><img data-src="/assets/496955847700/1*nCRCtKP40IMAOBbR__F_vg.png" alt="bind mongo-express to the same network" class="lazyload" data-proofer-ignore></a></p><p>bind mongo-express to the same network</p><p>Create your own database to mongo express hosted on localhost:8081 as shown below :</p><p><a href="/assets/496955847700/1*L840cJFPNoYxX9P6qtGOLw.png" class="popup img-link "><img data-src="/assets/496955847700/1*L840cJFPNoYxX9P6qtGOLw.png" alt="MongoDB express" class="lazyload" data-proofer-ignore></a></p><p>MongoDB express</p><h4 id="docker-compose"><span class="mr-2"><strong>Docker Compose</strong></span><a href="#docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>We executed the below commands to create a docker network and start containers.</p><p><a href="/assets/496955847700/1*76rpsnnGExnmTYdqgSbj_w.png" class="popup img-link "><img data-src="/assets/496955847700/1*76rpsnnGExnmTYdqgSbj_w.png" alt="Commands to execute Mongo and Express" class="lazyload" data-proofer-ignore></a></p><p>Commands to execute Mongo and Express</p><p>This way of starting docker containers all the time is a little bit tedious and error-prone. You don’t want to run all these commands manually every time you want to run your application. Here docker-compose comes to the rescue.</p><p>Below is the docker-compose YAML file. Docker Compose can greatly simplify the process of starting and managing Docker containers. It allows you to define and run multi-container applications with a single YAML file.</p><p><a href="/assets/496955847700/1*GgVa7-TWMDQIUqs01lWZ5Q.png" class="popup img-link "><img data-src="/assets/496955847700/1*GgVa7-TWMDQIUqs01lWZ5Q.png" alt="docker-compose" class="lazyload" data-proofer-ignore></a></p><p>docker-compose</p><p>Run the docker-compose file.</p><p><a href="/assets/496955847700/1*Q8yq0b-qNQkQ_Kt4rG960g.png" class="popup img-link "><img data-src="/assets/496955847700/1*Q8yq0b-qNQkQ_Kt4rG960g.png" alt="Run using docker-compose" class="lazyload" data-proofer-ignore></a></p><p>Run using docker-compose</p><p>Here the interesting thing to note is that it is creating a network ‘Network docker-tutorial-mongodb_default’ to run both the containers in it. we can verify it using docker ps.</p><h4 id="build-our-own-dockerfile"><span class="mr-2">Build our own Dockerfile</span><a href="#build-our-own-dockerfile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Now our application is ready to deploy, in order to do so, our application should be packaged into its own docker image.</p><p>In order to build a Docker image, we need <strong><em>Dockerfile</em></strong> .</p><p><a href="/assets/496955847700/1*3GURn92Sehf6pZBncvWtkw.png" class="popup img-link "><img data-src="/assets/496955847700/1*3GURn92Sehf6pZBncvWtkw.png" alt="Dockerfile" class="lazyload" data-proofer-ignore></a></p><p>Dockerfile</p><pre><code class="language-less">docker build -t [image:tag] [location of docker file]
docker build -t myapp .
docker run myapp // run the application
</code></pre><p>It will create a docker image.</p><p><a href="/assets/496955847700/1*5b0r0TYpG2zNEEPUzWeAzw.png" class="popup img-link "><img data-src="/assets/496955847700/1*5b0r0TYpG2zNEEPUzWeAzw.png" alt="" class="lazyload" data-proofer-ignore></a></p><h4 id="docker-registry"><span class="mr-2">Docker Registry</span><a href="#docker-registry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>A Docker Registry is a repository that stores Docker images, allowing users to share, distribute, and manage container images across different environments and systems</p><p>We will be pushing the above-generated image to the AWS container registery.</p><ol><li>Set up an AWS account and create an ECR repository. (As shown below)<li>Authenticate the Docker CLI with your AWS credentials by running the <code class="language-plaintext highlighter-rouge">aws ecr get-login-password --region &amp;lt;region&amp;gt; | docker login --username AWS --password-stdin &amp;lt;account-id&amp;gt;.dkr.ecr.&amp;lt;region&amp;gt;.amazonaws.com</code> command.</ol><p><a href="/assets/496955847700/1*Y4ZTAuNjd2zBHKOZ9xb0lA.png" class="popup img-link "><img data-src="/assets/496955847700/1*Y4ZTAuNjd2zBHKOZ9xb0lA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>3. Build the docker image using the commands shown below:</p><p><a href="/assets/496955847700/1*bb-y2uBHHWyZujkVSR4qPg.png" class="popup img-link "><img data-src="/assets/496955847700/1*bb-y2uBHHWyZujkVSR4qPg.png" alt="Push commands" class="lazyload" data-proofer-ignore></a></p><p>Push commands</p><p>Once the above commands are executed, you can see the docker image of your app on the AWS docker registry.</p><p><a href="/assets/496955847700/1*MtkOJbuB9VDKwxsl0HKxtg.png" class="popup img-link "><img data-src="/assets/496955847700/1*MtkOJbuB9VDKwxsl0HKxtg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p><strong>Pull Image from AWS registry:</strong></p><p>Update the YAML file to pull the image for our application.</p><p><a href="/assets/496955847700/1*ban--IVVK8-Gy2976pw6JA.png" class="popup img-link "><img data-src="/assets/496955847700/1*ban--IVVK8-Gy2976pw6JA.png" alt="" class="lazyload" data-proofer-ignore></a></p><h4 id="docker-volumes"><span class="mr-2">Docker Volumes</span><a href="#docker-volumes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Docker volumes provide a way to persist and share data between Docker containers and the host machine.</p><p>In the above Golang app, whenever I was restarting or removing the container, it was deleting all the data from MongoDB.</p><p>For stateful apps, we need docker volumes.</p><p>We can define docker volumes in the YAML file and can associate container volumes with it.</p><p><a href="/assets/496955847700/1*AF58ffHUmHxztYVsoOYSog.png" class="popup img-link "><img data-src="/assets/496955847700/1*AF58ffHUmHxztYVsoOYSog.png" alt="Define the docker volume in the YAML file" class="lazyload" data-proofer-ignore></a></p><p>Define the docker volume in the YAML file</p><p>Docker volumes work by connecting or “plugging” the physical file system on the host machine to the file system inside the container. This allows data to be seamlessly shared and persisted between the host and the container.</p><p><strong>Volume Types</strong></p><p>There are 3 Volume types:</p><ol><li>Anonymous Volumes:</ol><ul><li>Created and managed by Docker without a specific name assigned.<li>Syntax: <code class="language-plaintext highlighter-rouge">docker run -v /path/to/volume &amp;lt;image&amp;gt;</code></ul><p>2. Named Volumes:</p><ul><li>Explicitly created and named by the user for better management.<li>Syntax: <code class="language-plaintext highlighter-rouge">docker run -v &amp;lt;volume-name&amp;gt;:/path/to/volume &amp;lt;image&amp;gt;</code></ul><p>3. Bind Mounts:</p><ul><li>Maps a specific directory or file on the host to a directory in the container.<li>Syntax: <code class="language-plaintext highlighter-rouge">docker run -v /host/path:/container/path &amp;lt;image&amp;gt;</code></ul><blockquote><p>Mostly used type is named volume. Unlike anonymous volumes, named volumes are explicitly created and named by the user, providing better control and management.</p></blockquote><p><strong>Docker volume location:</strong></p><p>In Mac, the default folder is /var/lib/docker/volume</p><p>But you won’t be able to see any folder here, the way it works on Mac is that docker for Mac creates a Linux VM and store data over there as shown below:</p><p><a href="/assets/496955847700/1*wEgUF7_u4qEk1Z8JAHsO6w.png" class="popup img-link "><img data-src="/assets/496955847700/1*wEgUF7_u4qEk1Z8JAHsO6w.png" alt="Docker Volume path on the host machine" class="lazyload" data-proofer-ignore></a></p><p>Docker Volume path on the host machine</p><p>If you would like to view the full codebase, please visit the repository by clicking here: <a href="https://github.com/kamna123/docker-tutorial-mongodb" target="_blank"><strong>Repo</strong></a></p><h4 id="references"><span class="mr-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Video lecture by Techworld with Nana</ol><p><em><a href="https://kamnagarg-10157.medium.com/learn-docker-through-hands-on-examples-496955847700" target="_blank">Post</a> converted from Medium by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/docker-compose/" class="post-tag no-text-decoration" >docker-compose</a> <a href="/tags/dockerfiles/" class="post-tag no-text-decoration" >dockerfiles</a> <a href="/tags/docker-image/" class="post-tag no-text-decoration" >docker-image</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Learn%20Docker%20through%20Hands-on%20Examples%20-%20Kamna&url=%2Fposts%2F496955847700%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Learn%20Docker%20through%20Hands-on%20Examples%20-%20Kamna&u=%2Fposts%2F496955847700%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Fposts%2F496955847700%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ff56d35a891f/">Mastering Asynchronous Programming with Kotlin Coroutines — Part 1</a><li><a href="/posts/ed48312c0e80/">Think, Stick and just go</a><li><a href="/posts/34d9d3a5565b/">Exploring Context in Golang</a><li><a href="/posts/f01ac6e884dc/">Exploring the Internals of Channels in Go</a><li><a href="/posts/40902c487f04/">Demystifying Kubernetes: Part 1</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/backend-development/">backend-development</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/boyer-moore/">boyer-moore</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/deadlock/">deadlock</a> <a class="post-tag" href="/tags/defer/">defer</a> <a class="post-tag" href="/tags/design-patterns/">design-patterns</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ff56d35a891f/"><div class="card-body"> <em class="small" data-ts="1711401180" data-df="ll" > Mar 25, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Mastering Asynchronous Programming with Kotlin Coroutines — Part 1</h3><div class="text-muted small"><p> Mastering Asynchronous Programming with Kotlin Coroutines — Part 1 Welcome to mastering Asynchronous Programming with Kotlin Coroutines — Part 1. In this article, we’re going to cover coroutine...</p></div></div></a></div><div class="card"> <a href="/posts/40902c487f04/"><div class="card-body"> <em class="small" data-ts="1690024416" data-df="ll" > Jul 22, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Demystifying Kubernetes: Part 1</h3><div class="text-muted small"><p> Demystifying Kubernetes: Part 1 In the last blog , we discussed docker using which you can package your application along with all its dependencies as images and you can directly run those images ...</p></div></div></a></div><div class="card"> <a href="/posts/c27eb9b33217/"><div class="card-body"> <em class="small" data-ts="1689700516" data-df="ll" > Jul 18, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Database Isolation levels</h3><div class="text-muted small"><p> Database Isolation levels Image source: Google Managing queries on a database becomes challenging when multiple users are trying to fetch/update information concurrently. As your application gr...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/5f41199085b9/" class="btn btn-outline-primary" prompt="Older"><p>Understanding Mutex in Go</p></a> <a href="/posts/c27eb9b33217/" class="btn btn-outline-primary" prompt="Newer"><p>Database Isolation levels</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/backend-development/">backend-development</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/boyer-moore/">boyer-moore</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/deadlock/">deadlock</a> <a class="post-tag" href="/tags/defer/">defer</a> <a class="post-tag" href="/tags/design-patterns/">design-patterns</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/kamna90">kamna</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">All rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
