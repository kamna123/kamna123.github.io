<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Exploring Context in Golang" /><meta name="author" content="Kamna Garg" /><meta property="og:locale" content="en" /><meta name="description" content="Concurrency is an important part of Go programming, and managing goroutines effectively is vital for creating strong and scalable…" /><meta property="og:description" content="Concurrency is an important part of Go programming, and managing goroutines effectively is vital for creating strong and scalable…" /><link rel="canonical" href="/posts/34d9d3a5565b/" /><meta property="og:url" content="/posts/34d9d3a5565b/" /><meta property="og:site_name" content="Kamna" /><meta property="og:image" content="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-06T15:05:16+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" /><meta property="twitter:title" content="Exploring Context in Golang" /><meta name="twitter:site" content="@kamna90" /><meta name="twitter:creator" content="@Kamna Garg" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kamna Garg"},"dateModified":"2023-10-12T17:42:50+00:00","datePublished":"2023-07-06T15:05:16+00:00","description":"Concurrency is an important part of Go programming, and managing goroutines effectively is vital for creating strong and scalable…","headline":"Exploring Context in Golang","image":"/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/34d9d3a5565b/"},"url":"/posts/34d9d3a5565b/"}</script><title>Exploring Context in Golang | Kamna</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kamna"><meta name="application-name" content="Kamna"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/1621252237275.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Kamna</a></div><div class="site-subtitle font-italic">Womanwhocode</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="javascript:location.href = 'mailto:' + ['kamna90123','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Exploring Context in Golang</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Exploring Context in Golang</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1688655916" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 6, 2023 </em> </span> <span> Updated <em class="" data-ts="1697132570" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 12, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2042 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h3 id="exploring-context-in-golang"><span class="mr-2">Exploring Context in Golang</span><a href="#exploring-context-in-golang" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*XLcpEt5GVUszIJ18uJp_iA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Concurrency is an important part of Go programming, and managing goroutines effectively is vital for creating strong and scalable applications. The context package in Go offers a useful tool for handling timeouts, cancellations, and sharing values specific to a request. In this blog post, we will explore the concept of context in Go, its significance, how to create and use contexts, and provide real-life examples that demonstrate how context can solve common challenges in concurrent programming.</p><h4 id="what-is-context-in-go-and-why-it-is-needed"><span class="mr-2">What is Context in go and why it is needed</span><a href="#what-is-context-in-go-and-why-it-is-needed" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p>In Go, a context is a mechanism for managing concurrent operations, such as goroutines, by passing information and signals between different parts of a program. It allows for handling timeouts, cancellations, and sharing values in a controlled manner.</p></blockquote><p>For example, in a web server, a context can be created for each incoming request and passed to the corresponding goroutine. This context can carry request-specific data and control aspects like deadlines and cancellations.</p><p>Let’s consider a scenario where you’re preparing a sandwich for a friend, and you’ve assigned a few people to buy the required ingredients like tomatoes and bread. However, your friend suddenly changes their mind and no longer wants the sandwich. In this case, you need to cancel all the ongoing operations related to buying the ingredients.</p><p>The context also supports timeouts, ensuring that if an operation takes too long, it is automatically canceled. This helps prevent unnecessary delays and ensures efficient execution.</p><p>Overall, a context in Go enables better management of concurrent operations by providing a structured way to share information, handle timeouts, and propagate cancellations. It enhances control and coordination in concurrent programming.</p><h4 id="context-creation"><span class="mr-2">Context Creation</span><a href="#context-creation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Go provides several functions to create contexts.</p><blockquote><p>When working with contexts in Go, there is a concept of a parent context and a child context. The parent context serves as the root context from which child contexts are derived.</p></blockquote><p>Let’s understand this concept in the context of the functions used to create contexts.</p><ol><li><code class="language-plaintext highlighter-rouge">context.Background()</code> : This function returns a background context, which serves as the root parent context. It is often used as the starting point for creating other contexts.<li><code class="language-plaintext highlighter-rouge">context.TODO()</code> : The TODO function returns a context that is similar to <code class="language-plaintext highlighter-rouge">Background()</code> . It indicates that the specific context to use is not yet determined. It is typically used when a context is expected but not available at the moment. It is advisable to document the reason for using TODO and replace it with an appropriate context later.<li><code class="language-plaintext highlighter-rouge">context.WithValue(parentContext, key, value)</code> :This function creates a child context derived from a parent context ( <code class="language-plaintext highlighter-rouge">parentContext</code> ) . It associates a key-value pair with the child context, allowing for the passing of request-scoped values. The child context inherits the values from the parent context and can add or overwrite values specific to itself.<li><code class="language-plaintext highlighter-rouge">context.WithTimeout(parentContext, timeout)</code> : WithTimeout creates a child context derived from a parent context ( <code class="language-plaintext highlighter-rouge">parentContext</code> ) with a specified timeout duration. This child context is automatically canceled when the timeout duration elapses. The timeout value is specific to the child context and does not affect the parent context or other child contexts derived from the same parent.<li><code class="language-plaintext highlighter-rouge">context.WithDeadline(parentContext, deadline)</code> : WithDeadline creates a child context derived from a parent context ( <code class="language-plaintext highlighter-rouge">parentContext</code> ) with an explicit deadline. The child context is automatically canceled when the specified deadline is reached. Similar to <code class="language-plaintext highlighter-rouge">WithTimeout</code> , the deadline is specific to the child context and does not affect other contexts.</ol><h4 id="context-interface"><span class="mr-2">Context Interface</span><a href="#context-interface" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <code class="language-plaintext highlighter-rouge">context</code> package defines the <code class="language-plaintext highlighter-rouge">Context</code> interface, which represents a context in Go. The <code class="language-plaintext highlighter-rouge">Context</code> interface includes the following methods:</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre>// A Context carries a deadline, a cancellation signal, and other values across
// API boundaries.
//
// Context's methods may be called by multiple goroutines simultaneously.
type Context interface {
	// Deadline returns the time when work done on behalf of this context
	// should be canceled. Deadline returns ok==false when no deadline is
	// set. Successive calls to Deadline return the same results.
	Deadline() (deadline time.Time, ok bool)
	// Done returns a channel that's closed when work done on behalf of this
	// context should be canceled. Done may return nil if this context can
	// never be canceled. Successive calls to Done return the same value.
	// The close of the Done channel may happen asynchronously,
	// after the cancel function returns.
	// WithCancel arranges for Done to be closed when cancel is called;
	// WithDeadline arranges for Done to be closed when the deadline
	// expires; WithTimeout arranges for Done to be closed when the timeout
	// elapses.
	//
	// Done is provided for use in select statements
	Done() &lt;-chan struct{}
	// If Done is not yet closed, Err returns nil.
	// If Done is closed, Err returns a non-nil error explaining why:
	// Canceled if the context was canceled
	// or DeadlineExceeded if the context's deadline passed.
	// After Err returns a non-nil error, successive calls to Err return the same error.
	Err() error
	// Value returns the value associated with this context for key, or nil
	// if no value is associated with key. Successive calls to Value with
	// the same key returns the same result.
	Value(key any) any
}
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">Deadline() (deadline time.Time, ok bool)</code> : Returns the context’s deadline, indicating when the associated operation should be completed. The <code class="language-plaintext highlighter-rouge">ok</code> flag indicates if a deadline is set.<li><code class="language-plaintext highlighter-rouge">Done() &amp;lt;-chan struct{}</code> : Returns a channel that is closed when the context is canceled or times out.<li><code class="language-plaintext highlighter-rouge">Err() error</code> : Returns the reason for context cancellation, which can be a timeout or a specific error value.<li><code class="language-plaintext highlighter-rouge">Value(key interface{}) interface{}</code> : Returns the value associated with a given key from the context. This allows for passing request-scoped values through the context.</ul><h4 id="context-propogate-from-parent-to-child"><span class="mr-2">Context propogate from parent to child</span><a href="#context-propogate-from-parent-to-child" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>When a parent goroutine creates a child goroutine in Go, the context can be propagated from the parent to the child. Context propagation allows the child goroutine to inherit and carry forward the same context values, deadlines, and cancellations.</p><p>In Go, context propagation is achieved through the use of the <code class="language-plaintext highlighter-rouge">context.Context</code> type, which is passed as an argument to functions or goroutines that need access to the context.</p><p><a href="/assets/34d9d3a5565b/1*355YthR4PGSOSFPELY0rxQ.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*355YthR4PGSOSFPELY0rxQ.png" alt="Context Hierarchy" class="lazyload" data-proofer-ignore></a></p><p>Context Hierarchy</p><p>In Go, context propagation is achieved through the use of the <code class="language-plaintext highlighter-rouge">context.Context</code> type, which is passed as an argument to functions or goroutines that need access to the context.</p><p>Here’s a step-by-step explanation of how context propagates from a parent to a child goroutine:</p><ol><li>Parent Goroutine creates a Context: The parent goroutine creates a <code class="language-plaintext highlighter-rouge">context.Context</code> using one of the context creation functions, such as <code class="language-plaintext highlighter-rouge">context.Background()</code> , <code class="language-plaintext highlighter-rouge">context.TODO()</code> , or by deriving a new context from an existing context using functions like <code class="language-plaintext highlighter-rouge">context.WithValue</code> , <code class="language-plaintext highlighter-rouge">context.WithTimeout</code> , or <code class="language-plaintext highlighter-rouge">context.WithDeadline</code> .<li>Parent Goroutine spawns a Child Goroutine: Once the context is created, the parent goroutine spawns a child goroutine using the <code class="language-plaintext highlighter-rouge">go</code> keyword or any other means of concurrent execution. The child goroutine is passed the context as an argument.<li>Child Goroutine Receives the Context: In the child goroutine, the context passed from the parent goroutine is received as a parameter. This allows the child goroutine to access the same context and any associated values, deadlines, or cancellations.<li>Context Operations in Child Goroutine: Inside the child goroutine, the context can be used to check for deadlines, retrieve values associated with keys using <code class="language-plaintext highlighter-rouge">ctx.Value</code> , or check for cancellation using <code class="language-plaintext highlighter-rouge">ctx.Done()</code> .<li>Context Propagation in Subsequent Child Goroutines: If the child goroutine further spawns additional goroutines, the same context can be propagated by passing it to the newly created goroutines. This ensures that the context and its properties are available throughout the goroutine hierarchy.</ol><p>By propagating the context from parent to child goroutines, you ensure that important information, such as deadlines or cancellations, is carried forward and can be appropriately utilized in each goroutine.</p><p><strong>For instance, in above diagram canceling c2 will cancel c2, c4 and c5 only.</strong></p><blockquote><p>It’s important to note that while the context itself is immutable, you can derive new contexts from existing ones with additional values, timeouts, or deadlines as needed. This allows each goroutine to have its own specific context while still inheriting the values and properties of its parent context.</p></blockquote><h4 id="real-life-examples"><span class="mr-2">Real-Life Examples:</span><a href="#real-life-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><strong>WithValue Context</strong></ol><p>User Authentication: Checking if a token is valid and setting an “authenticated” value in the context to represent the authentication status of a user.</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"context"</span>
	<span class="s">"fmt"</span>
	<span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">Authenticate</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">token</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="n">validToken</span> <span class="o">:=</span> <span class="s">"secret_token"</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"-------request ID ------"</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="s">"requestID"</span><span class="p">))</span>
	<span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithValue</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"authenticated"</span><span class="p">,</span> <span class="no">false</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">token</span> <span class="o">==</span> <span class="n">validToken</span> <span class="p">{</span>
		<span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithValue</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"authenticated"</span><span class="p">,</span> <span class="no">true</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="s">"authenticated"</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
	<span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithValue</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"requestID"</span><span class="p">,</span> <span class="s">"12345"</span><span class="p">)</span>
	<span class="k">go</span> <span class="k">func</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">isAuthenticated</span> <span class="o">:=</span> <span class="n">Authenticate</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"secret_token"</span><span class="p">)</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Authenticated:"</span><span class="p">,</span> <span class="n">isAuthenticated</span><span class="p">)</span>
	<span class="p">}(</span><span class="n">ctx</span><span class="p">)</span>
	<span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithValue</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"requestID"</span><span class="p">,</span> <span class="s">"12346"</span><span class="p">)</span>
	<span class="k">go</span> <span class="k">func</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">isAuthenticated</span> <span class="o">:=</span> <span class="n">Authenticate</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"secret_token"</span><span class="p">)</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Authenticated:"</span><span class="p">,</span> <span class="n">isAuthenticated</span><span class="p">)</span>
	<span class="p">}(</span><span class="n">ctx</span><span class="p">)</span>

	<span class="c">// ...</span>
	<span class="c">// Perform other concurrent operations</span>
	<span class="c">// ...</span>
	<span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/34d9d3a5565b/1*2c3ysw1y7OvmFfee-qIInQ.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*2c3ysw1y7OvmFfee-qIInQ.png" alt="output" class="lazyload" data-proofer-ignore></a></p><p>output</p><p><code class="language-plaintext highlighter-rouge">Authenticate</code> function checks if a token is valid and sets the <code class="language-plaintext highlighter-rouge">authenticated</code> value in the context accordingly. The <code class="language-plaintext highlighter-rouge">main</code> function creates a background context using <code class="language-plaintext highlighter-rouge">context.Background()</code> and sets a request ID value. The <code class="language-plaintext highlighter-rouge">Authenticate</code> function is invoked as a goroutine, allowing concurrent authentication checks while using the same context across multiple goroutines.</p><p><strong>2. WithTimeout Context</strong></p><p><strong>External API Request</strong> : Making an API request with a timeout, where the request either completes within the specified timeout or gets canceled if it exceeds the timeout duration.</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"context"</span>
	<span class="s">"fmt"</span>
	<span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">makeAPIRequest</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">select</span> <span class="p">{</span>
	<span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">" API request cancelled "</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">Err</span><span class="p">())</span>
	<span class="k">case</span> <span class="o">&lt;-</span><span class="n">time</span><span class="o">.</span><span class="n">After</span><span class="p">(</span><span class="m">3</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span><span class="o">:</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"API request completed"</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">parentCtx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
	<span class="n">childCtx1</span><span class="p">,</span> <span class="n">cancel</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithTimeout</span><span class="p">(</span><span class="n">parentCtx</span><span class="p">,</span> <span class="m">2</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
	<span class="k">defer</span> <span class="n">cancel</span><span class="p">()</span>

	<span class="k">go</span> <span class="n">makeAPIRequest</span><span class="p">(</span><span class="n">childCtx1</span><span class="p">)</span>
	<span class="n">childCtx2</span><span class="p">,</span> <span class="n">cancel</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithTimeout</span><span class="p">(</span><span class="n">parentCtx</span><span class="p">,</span> <span class="m">10</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
	<span class="k">defer</span> <span class="n">cancel</span><span class="p">()</span>
	<span class="k">go</span> <span class="n">makeAPIRequest</span><span class="p">(</span><span class="n">childCtx2</span><span class="p">)</span>
	<span class="c">// ...</span>
	<span class="c">// Perform other concurrent operations</span>
	<span class="c">// ...</span>
	<span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/34d9d3a5565b/1*Q3AtP0t2uDIZ06o-ay67ng.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*Q3AtP0t2uDIZ06o-ay67ng.png" alt="Context Hierarchy" class="lazyload" data-proofer-ignore></a></p><p>Context Hierarchy</p><p>In this example, the <code class="language-plaintext highlighter-rouge">MakeAPIRequest</code> function that simulates making an API request to an external endpoint. The function uses a select statement with a timeout of 3 seconds. If the request completes within the specified timeout, it prints a success message. Otherwise, if the context is canceled due to the timeout, it prints a cancellation message.</p><p>Here childCtx1 will be cancelled as timeout is 2 seconds and childCtx2 will be completed in the given timeout.</p><p><a href="/assets/34d9d3a5565b/1*60bef4FOTeLYTIs0jIs1oQ.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*60bef4FOTeLYTIs0jIs1oQ.png" alt="Output" class="lazyload" data-proofer-ignore></a></p><p>Output</p><p><strong>3. WithDeadline Context</strong></p><p><strong>Task Scheduling</strong> : Scheduling a task to be completed before a given deadline, where the task either completes within the deadline or gets canceled if it exceeds the deadline.</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"context"</span>
	<span class="s">"fmt"</span>
	<span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">ScheduleTask</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">taskName</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>

	<span class="k">select</span> <span class="p">{</span>
	<span class="k">case</span> <span class="o">&lt;-</span><span class="n">time</span><span class="o">.</span><span class="n">After</span><span class="p">(</span><span class="m">4</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span><span class="o">:</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Task '%s' completed</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">taskName</span><span class="p">)</span>
	<span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Task '%s' canceled: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">taskName</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">Err</span><span class="p">())</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">parentCtx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
	<span class="n">deadline</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">1</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
	<span class="n">childCtx1</span><span class="p">,</span> <span class="n">cancel</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithDeadline</span><span class="p">(</span><span class="n">parentCtx</span><span class="p">,</span> <span class="n">deadline</span><span class="p">)</span>
	<span class="k">defer</span> <span class="n">cancel</span><span class="p">()</span>

	<span class="k">go</span> <span class="n">ScheduleTask</span><span class="p">(</span><span class="n">childCtx1</span><span class="p">,</span> <span class="s">"Data Processing"</span><span class="p">)</span>

	<span class="n">childChildCtx1</span><span class="p">,</span> <span class="n">cancel</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithDeadline</span><span class="p">(</span><span class="n">childCtx1</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">100</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">))</span>
	<span class="k">defer</span> <span class="n">cancel</span><span class="p">()</span>
	<span class="k">go</span> <span class="n">ScheduleTask</span><span class="p">(</span><span class="n">childChildCtx1</span><span class="p">,</span> <span class="s">"File Processing"</span><span class="p">)</span>

	<span class="n">childCtx2</span><span class="p">,</span> <span class="n">cancel</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">WithDeadline</span><span class="p">(</span><span class="n">parentCtx</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">10</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">))</span>
	<span class="k">defer</span> <span class="n">cancel</span><span class="p">()</span>
	<span class="k">go</span> <span class="n">ScheduleTask</span><span class="p">(</span><span class="n">childCtx2</span><span class="p">,</span> <span class="s">"Some remote Processing"</span><span class="p">)</span>
	<span class="c">// ...</span>
	<span class="c">// Perform other concurrent operations</span>
	<span class="c">// ...</span>
	<span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">10</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/34d9d3a5565b/1*Btd82_NxFwkzBIUDG9euMw.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*Btd82_NxFwkzBIUDG9euMw.png" alt="Context Hierarchy" class="lazyload" data-proofer-ignore></a></p><p>Context Hierarchy</p><p>Here I am cancelling childCtx1(data processing ctx) but it is cancelling childchildCtx1 (file processing) as well even though deadline is 100 sec for that.</p><p><a href="/assets/34d9d3a5565b/1*ihAPij3EuTDmL7jiatnLYg.png" class="popup img-link "><img data-src="/assets/34d9d3a5565b/1*ihAPij3EuTDmL7jiatnLYg.png" alt="output" class="lazyload" data-proofer-ignore></a></p><p>output</p><h4 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Contexts in Go provide a standardized way to manage goroutines, handle timeouts, cancellations, and share request-scoped values.</p><p>If you would like to view the full codebase, please visit the repository by clicking here: <a href="https://github.com/kamna123/context-tutorial" target="_blank"><strong>Repo</strong></a></p><p><em><a href="https://medium.com/womenintechnology/exploring-context-in-golang-34d9d3a5565b" target="_blank">Post</a> converted from Medium by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/women/'>Women</a>, <a href='/categories/in/'>in</a>, <a href='/categories/technology/'>Technology</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Exploring%20Context%20in%20Golang%20-%20Kamna&url=%2Fposts%2F34d9d3a5565b%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Exploring%20Context%20in%20Golang%20-%20Kamna&u=%2Fposts%2F34d9d3a5565b%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Fposts%2F34d9d3a5565b%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ff56d35a891f/">Mastering Asynchronous Programming with Kotlin Coroutines — Part 1</a><li><a href="/posts/ed48312c0e80/">Think, Stick and just go</a><li><a href="/posts/34d9d3a5565b/">Exploring Context in Golang</a><li><a href="/posts/f01ac6e884dc/">Exploring the Internals of Channels in Go</a><li><a href="/posts/40902c487f04/">Demystifying Kubernetes: Part 1</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/backend-development/">backend-development</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/boyer-moore/">boyer-moore</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/deadlock/">deadlock</a> <a class="post-tag" href="/tags/defer/">defer</a> <a class="post-tag" href="/tags/design-patterns/">design-patterns</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/f01ac6e884dc/"><div class="card-body"> <em class="small" data-ts="1688076144" data-df="ll" > Jun 29, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Exploring the Internals of Channels in Go</h3><div class="text-muted small"><p> Exploring the Internals of Channels in Go Introduction Channels are a vital component of concurrent programming in Go. They provide a safe and efficient way for goroutines to communicate and share...</p></div></div></a></div><div class="card"> <a href="/posts/ed48312c0e80/"><div class="card-body"> <em class="small" data-ts="1623950053" data-df="ll" > Jun 17, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Think, Stick and just go</h3><div class="text-muted small"><p> Think, Stick and just go I just finished watching the Skater Girl movie and have penned down my thoughts. First of all, it’s really an inspiring movie. It focuses on the story of a poor village g...</p></div></div></a></div><div class="card"> <a href="/posts/ff56d35a891f/"><div class="card-body"> <em class="small" data-ts="1711401180" data-df="ll" > Mar 25, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Mastering Asynchronous Programming with Kotlin Coroutines — Part 1</h3><div class="text-muted small"><p> Mastering Asynchronous Programming with Kotlin Coroutines — Part 1 Welcome to mastering Asynchronous Programming with Kotlin Coroutines — Part 1. In this article, we’re going to cover coroutine...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/f01ac6e884dc/" class="btn btn-outline-primary" prompt="Older"><p>Exploring the Internals of Channels in Go</p></a> <a href="/posts/5f41199085b9/" class="btn btn-outline-primary" prompt="Newer"><p>Understanding Mutex in Go</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/backend-development/">backend-development</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/boyer-moore/">boyer-moore</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/deadlock/">deadlock</a> <a class="post-tag" href="/tags/defer/">defer</a> <a class="post-tag" href="/tags/design-patterns/">design-patterns</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/kamna90">kamna</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">All rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
